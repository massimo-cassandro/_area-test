!function(){"use strict";const e=[["albero","clipart-albero"],["ciliege","clipart-ciliege"],["cuore","clipart-cuore"],["fiore","clipart-fiore"],["fiori","clipart-fiori"],["foglia","clipart-foglia"],["luna","clipart-luna"],["macchia","clipart-macchia"],["mano","clipart-mano"],["mela","clipart-mela"],["zero","clipart-num-00"],["uno","clipart-num-01"],["due","clipart-num-02"],["tre","clipart-num-03"],["quattro","clipart-num-04"],["cinque","clipart-num-05"],["sei","clipart-num-06"],["sette","clipart-num-07"],["otto","clipart-num-08"],["nove","clipart-num-09"],["dieci","clipart-num-10"],["undici","clipart-num-11"],["dodici","clipart-num-12"],["tredici","clipart-num-13"],["quattordici","clipart-num-14"],["quindici","clipart-num-15"],["sedici","clipart-num-16"],["diciassette","clipart-num-17"],["diciotto","clipart-num-18"],["diciannove","clipart-num-19"],["venti","clipart-num-20"],["palloncini","clipart-palloncini"],["pera","clipart-pera"],["pesce","clipart-pesce"],["sole","clipart-sole"],["stella","clipart-stella"]],t={svg_wrapper:document.getElementById("svg-wrapper"),storage_var:"la_ruota_dei",cliparts_wrapper:document.querySelector("main .cliparts-list"),cliparts_selected_wrapper:document.querySelector("main .cliparts-selected-wrapper")};var r,i,a,n,l,c,o,d,s,p,u,f;e.sort(((e,t)=>{const r="clipart-num";return(e[1].indexOf(r)>-1?1:0)-(t[1].indexOf(r)>-1?1:0)})),e.forEach((function(e){t.cliparts_wrapper.insertAdjacentHTML("beforeend",'<div class="clipart" data-id="'+e[1]+'" data-nome="'+e[0]+'" role="button"><svg><title>'+e[0]+'</title><use xlink:href="#'+e[1]+'"></use></svg><div class="clipart-dida" title="'+e[0]+'">'+e[0]+"</div></div>")})),r=function(){var e=document.createElement("style");e.type="text/css",e.innerHTML=".grabbable > * { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; cursor: -webkit-grab; cursor: grab } .grabbable > .grabbable-dummy { border: 1px solid #d4d4d4; background: repeating-linear-gradient( -45deg, #fff, #fff 4px, #d4d4d4 4px, #d4d4d4 5px );}",document.querySelector("body").appendChild(e)},i=null,a=function(e){if(document.createEventObject)e.fireEvent("ondragged");else{var t=document.createEvent("HTMLEvents");t.initEvent("dragged",!1,!0),e.dispatchEvent(t),i&&"function"==typeof i&&i()}},n=null,l=null,c=function(){(l=document.createElement("div")).style.position="absolute",l.style.width="1px",l.style.height="1px",l.style.overflow="hidden",(n=document.createElement("div")).className="grabbable-dummy",n.style.position="relative",n.addEventListener("drop",(function(e){if("draggable"===e.dataTransfer.getData("text")){for(e.preventDefault(),e.stopPropagation();l.children.length>0;){var t=l.children[0];this.parentNode.insertBefore(t,this)}n.style.display="none",a(n.parentNode)}}));var e=document.querySelector("body");e.appendChild(n),e.appendChild(l)},o=function(e){null===l&&(r(),c()),l.style.left=e.offsetLeft+"px",l.style.top=e.offsetTop+"px",n.style.width=e.offsetWidth+"px",n.style.height=e.offsetHeight+"px";var t=window.getComputedStyle(e);n.style.display=t.display,n.style.margin=t.marginTop+" "+t.marginRight+" "+t.marginBottom+" "+t.marginLeft,n.style.padding=t.paddingTop+" "+t.paddingRight+" "+t.paddingBottom+" "+t.paddingLeft},d=function(){r(),c()},s=function(e){e.preventDefault(),e.stopPropagation()},p=function(e){e.preventDefault(),e.stopPropagation(),this.previousElementSibling!==n?this.parentNode.insertBefore(n,this):this.parentNode.insertBefore(n,this.nextElementSibling)},u=function(e){e.dataTransfer.setData("text","draggable")},f=function(e){if("draggable"===e.dataTransfer.getData("text")){for(s(e);l.children.length>0;){var t=l.children[0];n.parentNode.insertBefore(t,n)}n.style.display="none",a(n.parentNode)}},"complete"===document.readyState?d():document.addEventListener("DOMContentLoaded",(function(){d()})),HTMLElement.prototype.grabbable=function(e){(" "+this.className+" ").indexOf(" grabbable ")<0&&(this.className+=" grabbable"),e&&"function"==typeof e&&(i=e);for(var t=0;t<this.children.length;t++){var r=this.children[t];if(void 0===r.draggabled){if(r===n)continue;r.draggable=!0,r.addEventListener("dragstart",u),r.addEventListener("dragover",p),r.addEventListener("drag",(function(){this.parentNode!==l&&this!==n&&(o(this),this.parentNode.insertBefore(n,this),l.appendChild(this))})),r.addEventListener("drop",(function(e){s(e),document.createEventObject?n.fireEvent("ondrop",e):n.dispatchEvent(new DragEvent(e.type,e))})),r.draggabled=!0}}void 0===document.draggabled&&(document.addEventListener("dragover",s),document.addEventListener("drop",f),document.draggabled=!0)},(()=>{const e=t.svg_wrapper.querySelector("#ruota_retro");let r,i;const a=function(){return t.cliparts_selected_wrapper.querySelectorAll(".clipart-selected").length},n=function(){r=1==+document.querySelector('[name="finestre"]:checked').value?12:6,i=6===r,t.cliparts_selected_wrapper.classList.toggle("clipart-text",!i),a()>r&&t.cliparts_selected_wrapper.querySelectorAll(`.clipart-selected:nth-child(n+${r+1}`).forEach((e=>{e.remove()}))};document.querySelectorAll('[name="finestre"]').forEach((e=>{e.addEventListener("click",(()=>{n()}))})),t.addClipsToDisk=function(){n(),e.querySelectorAll(".clipart").forEach((e=>{e.remove()})),t.cliparts_selected_wrapper.querySelectorAll(".clipart-selected").forEach(((t,r)=>{let a=t.querySelector(".clipart-text input").value;const n=e.getAttribute("viewBox").split(" ")[2]/2;if(i){let i=28,l=n-i-52;e.insertAdjacentHTML("beforeend",`<g class="clipart clipart-text clipart-text-${t.dataset.idx}">\n            <text\n              text-anchor="start"\n              transform="rotate(90)"\n              style="/* visibility:hidden */"\n            >\n              ${a}\n            </text>\n          </g>`);let c=e.querySelector(`.clipart-text-${t.dataset.idx} text`),o=c.getBBox(),d=-n+(o.y+o.height)-5;c.setAttribute("y",d),c.setAttribute("x",i),o.width>l&&(c.setAttribute("textLength",l),c.setAttribute("lengthAdjust","spacingAndGlyphs")),e.querySelector(`.clipart-text-${t.dataset.idx}`).setAttribute("transform",`rotate(${30*r} ${n} ${n})`),e.insertAdjacentHTML("beforeend",`<use class="clipart clipart-${t.dataset.idx}"\n            width="50" height="50"\n            y="30" x="${n-25}"\n            transform="rotate(${30*(r+6)} ${n} ${n})"\n            xlink:href="#${t.dataset.id}">\n          </use>`)}else e.insertAdjacentHTML("beforeend",`<use class="clipart clipart-${t.dataset.idx}"\n            width="50" height="50"\n            y="30" x="${n-25}"\n            transform="rotate(${30*r} ${n} ${n})"\n            xlink:href="#${t.dataset.id}">\n          </use>`)}))},t.add_selected_clipart=function(e){let r=t.cliparts_selected_wrapper.querySelectorAll(".clipart-selected").length;t.cliparts_selected_wrapper.insertAdjacentHTML("beforeend",`<div class="clipart-selected" title="Trascina per cambiare la posizione">\n          <div>\n            <div class="clipart_btns">\n              <div class="drag-btn" role="button"><span>Trascina</span></div>\n              <div class="close-btn" title="Elimina" role="button"><span>Elimina</span></div>\n            </div>\n            <svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 100 100">\n              <use xlink:href="#${e.id}"></use>\n            </svg>\n            <div class="clipart-text mt-2">\n              <label for="clipart-label-${r}" class="sr-only">Nome</label>\n              <input class="form-control" id="clipart-label-${r}" value="${e.nome}" type="text">\n            </div>\n          </div>\n      </div>`);let i=t.cliparts_selected_wrapper.querySelector(".clipart-selected:last-child");for(let t in e)i.dataset[t]=e[t];i.dataset.idx=r,t.cliparts_selected_wrapper.grabbable(t.addClipsToDisk),t.addClipsToDisk(),i.querySelector(".close-btn").addEventListener("click",(function(){this.closest(".clipart-selected").remove(),t.addClipsToDisk()}))},t.cliparts_wrapper.querySelectorAll(".clipart").forEach((e=>{e.addEventListener("click",(()=>{a()<r?t.add_selected_clipart(e.dataset):alert("Hai raggiunto il numero massimo di immagini!")}))})),document.querySelector(".btn-reset-clips").addEventListener("click",(function(){e.querySelectorAll(".clipart").forEach((e=>{e.remove()})),t.cliparts_selected_wrapper.innerHTML=""}),!1),n()})(),(()=>{const e=document.getElementById("titolo1"),r=document.getElementById("titolo2"),i=document.getElementById("dim_titolo1"),a=document.getElementById("dim_titolo2"),n=t.svg_wrapper.querySelector("#ruota_fronte .titolo1"),l=t.svg_wrapper.querySelector("#ruota_fronte .titolo2"),c=t.svg_wrapper.querySelector("#ruota_fronte .finestra1"),o=t.svg_wrapper.querySelector("#ruota_fronte .deco");t.update=function(){let t=+document.querySelector('[name="finestre"]:checked').value,d=Boolean(+document.querySelector('[name="deco"]:checked').value),s=Boolean(+document.querySelector('[name="caratteri_titolo"]:checked').value);n.textContent=e.value,l.textContent=r.value;let p=[];p=s?["fill: #fff","stroke:#000","stroke-width:1px"]:["fill: #000","stroke:none"],n.style.cssText=p.join(";")+"; font-size:"+i.value+"px",l.style.cssText=p.join(";")+"; font-size:"+a.value+"px",o.toggleAttribute("hidden",d),c.toggleAttribute("hidden",1===t)},document.querySelectorAll("#settings input").forEach((e=>{e.addEventListener("change",(function(){t.update()})),"text"===e.type&&e.addEventListener("keyup",(function(){t.update()})),"radio"!==e.type&&"checkbox"!==e.type||e.addEventListener("click",(function(){t.update()}))})),t.update()})(),(()=>{t.store_settings=function(){let e={form:{}};document.querySelectorAll("#settings input").forEach((t=>{"radio"===t.type||"checkbox"===t.type?e.form[t.id]=t.checked:e.form[t.id]=t.value})),e.cliparts=[],t.cliparts_selected_wrapper.querySelectorAll(".clipart-selected").forEach((t=>{let r=t.querySelector(".clipart-text input").value;t.dataset.nome=r,e.cliparts.push(t.dataset)})),localStorage.setItem(t.storage_var,JSON.stringify(e))};let e=localStorage.getItem(t.storage_var);if(e&&(e=JSON.parse(e),void 0!==e.form&&void 0!==e.cliparts)){for(let t in e.form){let r=document.getElementById(t);"radio"===r.type||"checkbox"===r.type?r.checked=e.form[t]:r.value=e.form[t]}e.cliparts.forEach((e=>{t.add_selected_clipart(e)})),t.addClipsToDisk()}})(),document.querySelectorAll(".btn-print").forEach((e=>{e.addEventListener("click",(function(){t.update(),t.store_settings(),t.addClipsToDisk(),window.print()}),!1)})),document.querySelectorAll(".btn-store_settings").forEach((e=>{e.addEventListener("click",(function(){t.update(),t.store_settings(),t.addClipsToDisk()}),!1)}))}();
//# sourceMappingURL=la-ruota-dei.min.js.map
