"use strict";var RUOTA={svg_wrapper:document.getElementById("svg-wrapper"),storage_var:"la_ruota_dei",cliparts_wrapper:document.querySelector("main .cliparts-list"),cliparts_selected_wrapper:document.querySelector("main .cliparts-selected-wrapper")};!function(){var e=function(){var e=document.createElement("style");e.type="text/css",e.innerHTML=".grabbable > * { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; cursor: -webkit-grab; cursor: grab } .grabbable > .grabbable-dummy { border: 1px solid #d4d4d4; background: repeating-linear-gradient( -45deg, #fff, #fff 4px, #d4d4d4 4px, #d4d4d4 5px );}",document.querySelector("body").appendChild(e)},t=null,r=function(e){if(document.createEventObject)e.fireEvent("ondragged");else{var r=document.createEvent("HTMLEvents");r.initEvent("dragged",!1,!0),e.dispatchEvent(r),t&&"function"==typeof t&&t()}},n=null,a=null,i=function(){(a=document.createElement("div")).style.position="absolute",a.style.width="1px",a.style.height="1px",a.style.overflow="hidden",(n=document.createElement("div")).className="grabbable-dummy",n.style.position="relative",n.addEventListener("drop",function(e){if("draggable"===e.dataTransfer.getData("text")){for(e.preventDefault(),e.stopPropagation();a.children.length>0;){var t=a.children[0];this.parentNode.insertBefore(t,this)}n.style.display="none",r(n.parentNode)}});var e=document.querySelector("body");e.appendChild(n),e.appendChild(a)},c=function(t){null===a&&(e(),i()),a.style.left=t.offsetLeft+"px",a.style.top=t.offsetTop+"px",n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px";var r=window.getComputedStyle(t);n.style.display=r.display,n.style.margin=r.marginTop+" "+r.marginRight+" "+r.marginBottom+" "+r.marginLeft,n.style.padding=r.paddingTop+" "+r.paddingRight+" "+r.paddingBottom+" "+r.paddingLeft},l=function(){e(),i()},o=function(e){e.preventDefault(),e.stopPropagation()},d=function(e){e.preventDefault(),e.stopPropagation(),this.previousElementSibling!==n?this.parentNode.insertBefore(n,this):this.parentNode.insertBefore(n,this.nextElementSibling)},s=function(e){e.dataTransfer.setData("text","draggable")},p=function(e){if("draggable"===e.dataTransfer.getData("text")){for(o(e);a.children.length>0;){var t=a.children[0];n.parentNode.insertBefore(t,n)}n.style.display="none",r(n.parentNode)}};"complete"===document.readyState?l():document.addEventListener("DOMContentLoaded",function(){l()}),HTMLElement.prototype.grabbable=function(e){(" "+this.className+" ").indexOf(" grabbable ")<0&&(this.className+=" grabbable"),e&&"function"==typeof e&&(t=e);for(var r=0;r<this.children.length;r++){var i=this.children[r];if(void 0===i.draggabled){if(i===n)continue;i.draggable=!0,i.addEventListener("dragstart",s),i.addEventListener("dragover",d),i.addEventListener("drag",function(){this.parentNode!==a&&this!==n&&(c(this),this.parentNode.insertBefore(n,this),a.appendChild(this))}),i.addEventListener("drop",function(e){o(e),document.createEventObject?n.fireEvent("ondrop",e):n.dispatchEvent(new DragEvent(e.type,e))}),i.draggabled=!0}}void 0===document.draggabled&&(document.addEventListener("dragover",o),document.addEventListener("drop",p),document.draggabled=!0)}}();var cliparts_list=[["albero","clipart-albero"],["ciliege","clipart-ciliege"],["cuore","clipart-cuore"],["fiore","clipart-fiore"],["fiori","clipart-fiori"],["foglia","clipart-foglia"],["luna","clipart-luna"],["macchia","clipart-macchia"],["mano","clipart-mano"],["mela","clipart-mela"],["zero","clipart-num-00"],["uno","clipart-num-01"],["due","clipart-num-02"],["tre","clipart-num-03"],["quattro","clipart-num-04"],["cinque","clipart-num-05"],["sei","clipart-num-06"],["sette","clipart-num-07"],["otto","clipart-num-08"],["nove","clipart-num-09"],["dieci","clipart-num-10"],["undici","clipart-num-11"],["dodici","clipart-num-12"],["tredici","clipart-num-13"],["quattordici","clipart-num-14"],["quindici","clipart-num-15"],["sedici","clipart-num-16"],["diciassette","clipart-num-17"],["diciotto","clipart-num-18"],["diciannove","clipart-num-19"],["venti","clipart-num-20"],["palloncini","clipart-palloncini"],["pera","clipart-pera"],["pesce","clipart-pesce"],["sole","clipart-sole"],["stella","clipart-stella"]];RUOTA=function(e){return document.querySelectorAll(".btn-print").forEach(function(t){t.addEventListener("click",function(){e.update(),e.store_settings(),e.addClipsToDisk(),window.print()},!1)}),document.querySelectorAll(".btn-store_settings").forEach(function(t){t.addEventListener("click",function(){e.update(),e.store_settings(),e.addClipsToDisk()},!1)}),e}((RUOTA=function(e){e.store_settings=function(){var t={form:{}};document.querySelectorAll("#settings input").forEach(function(e){"radio"===e.type||"checkbox"===e.type?t.form[e.id]=e.checked:t.form[e.id]=e.value}),t.cliparts=[],e.cliparts_selected_wrapper.querySelectorAll(".clipart-selected").forEach(function(e){var r=e.querySelector(".clipart-text input").value;e.dataset.nome=r,t.cliparts.push(e.dataset)}),localStorage.setItem(e.storage_var,JSON.stringify(t))};var t=localStorage.getItem(e.storage_var);if(t&&void 0!==(t=JSON.parse(t)).form&&void 0!==t.cliparts){for(var r in t.form){var n=document.getElementById(r);"radio"===n.type||"checkbox"===n.type?n.checked=t.form[r]:n.value=t.form[r]}t.cliparts.forEach(function(t){e.add_selected_clipart(t)}),e.addClipsToDisk()}return e}((RUOTA=function(e){var t=document.getElementById("titolo1"),r=document.getElementById("titolo2"),n=document.getElementById("dim_titolo1"),a=document.getElementById("dim_titolo2"),i=e.svg_wrapper.querySelector("#ruota_fronte .titolo1"),c=e.svg_wrapper.querySelector("#ruota_fronte .titolo2"),l=e.svg_wrapper.querySelector("#ruota_fronte .finestra1"),o=e.svg_wrapper.querySelector("#ruota_fronte .deco");return e.update=function(){var e=+document.querySelector('[name="finestre"]:checked').value,d=Boolean(+document.querySelector('[name="deco"]:checked').value),s=Boolean(+document.querySelector('[name="caratteri_titolo"]:checked').value);i.textContent=t.value,c.textContent=r.value;var p=[];p=s?["fill: #fff","stroke:#000","stroke-width:1px"]:["fill: #000","stroke:none"],i.style.cssText=p.join(";")+"; font-size:"+n.value+"px",c.style.cssText=p.join(";")+"; font-size:"+a.value+"px",o.toggleAttribute("hidden",d),l.toggleAttribute("hidden",1===e)},document.querySelectorAll("#settings input").forEach(function(t){t.addEventListener("change",function(){e.update()}),"text"===t.type&&t.addEventListener("keyup",function(){e.update()}),"radio"!==t.type&&"checkbox"!==t.type||t.addEventListener("click",function(){e.update()})}),e.update(),e}((RUOTA=function(e){var t,r,n=e.svg_wrapper.querySelector("#ruota_retro"),a=function(){return e.cliparts_selected_wrapper.querySelectorAll(".clipart-selected").length},i=function(){t=1==+document.querySelector('[name="finestre"]:checked').value?12:6,r=6===t,e.cliparts_selected_wrapper.classList.toggle("clipart-text",!r),a()>t&&e.cliparts_selected_wrapper.querySelectorAll(".clipart-selected:nth-child(n+".concat(t+1)).forEach(function(e){e.remove()})};return document.querySelectorAll('[name="finestre"]').forEach(function(e){e.addEventListener("click",function(){i()})}),e.addClipsToDisk=function(){i(),n.querySelectorAll(".clipart").forEach(function(e){e.remove()}),e.cliparts_selected_wrapper.querySelectorAll(".clipart-selected").forEach(function(e,t){var a=e.querySelector(".clipart-text input").value,i=n.getAttribute("viewBox").split(" ")[2]/2;if(r){var c=i-28-52;n.insertAdjacentHTML("beforeend",'<g class="clipart clipart-text clipart-text-'.concat(e.dataset.idx,'">\n            <text\n              text-anchor="start"\n              transform="rotate(90)"\n              style="/* visibility:hidden */"\n            >\n              ').concat(a,"\n            </text>\n          </g>"));var l=n.querySelector(".clipart-text-".concat(e.dataset.idx," text")),o=l.getBBox(),d=-i+(o.y+o.height)-5;l.setAttribute("y",d),l.setAttribute("x",28),o.width>c&&(l.setAttribute("textLength",c),l.setAttribute("lengthAdjust","spacingAndGlyphs")),n.querySelector(".clipart-text-".concat(e.dataset.idx)).setAttribute("transform","rotate(".concat(30*t," ").concat(i," ").concat(i,")")),n.insertAdjacentHTML("beforeend",'<use class="clipart clipart-'.concat(e.dataset.idx,'"\n            width="').concat(50,'" height="').concat(50,'"\n            y="').concat(30,'" x="').concat(i-25,'"\n            transform="rotate(').concat(30*(t+6)," ").concat(i," ").concat(i,')"\n            xlink:href="#').concat(e.dataset.id,'">\n          </use>'))}else n.insertAdjacentHTML("beforeend",'<use class="clipart clipart-'.concat(e.dataset.idx,'"\n            width="').concat(50,'" height="').concat(50,'"\n            y="').concat(30,'" x="').concat(i-25,'"\n            transform="rotate(').concat(30*t," ").concat(i," ").concat(i,')"\n            xlink:href="#').concat(e.dataset.id,'">\n          </use>'))})},e.add_selected_clipart=function(t){var r=e.cliparts_selected_wrapper.querySelectorAll(".clipart-selected").length;e.cliparts_selected_wrapper.insertAdjacentHTML("beforeend",'<div class="clipart-selected" title="Trascina per cambiare la posizione">\n          <div>\n            <div class="clipart_btns">\n              <div class="drag-btn" role="button"><span>Trascina</span></div>\n              <div class="close-btn" title="Elimina" role="button"><span>Elimina</span></div>\n            </div>\n            <svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 100 100">\n              <use xlink:href="#'.concat(t.id,'"></use>\n            </svg>\n            <div class="clipart-text mt-2">\n              <label for="clipart-label-').concat(r,'" class="sr-only">Nome</label>\n              <input class="form-control" id="clipart-label-').concat(r,'" value="').concat(t.nome,'" type="text">\n            </div>\n          </div>\n      </div>'));var n=e.cliparts_selected_wrapper.querySelector(".clipart-selected:last-child");for(var a in t)n.dataset[a]=t[a];n.dataset.idx=r,e.cliparts_selected_wrapper.grabbable(),n.querySelector(".close-btn").addEventListener("click",function(){this.closest(".clipart-selected").remove()})},e.cliparts_wrapper.querySelectorAll(".clipart").forEach(function(r){r.addEventListener("click",function(){a()<t?e.add_selected_clipart(r.dataset):alert("Hai raggiunto il numero massimo di immagini!")})}),document.querySelector(".btn-reset-clips").addEventListener("click",function(){n.querySelectorAll(".clipart").forEach(function(e){e.remove()}),e.cliparts_selected_wrapper.innerHTML=""},!1),e}((RUOTA=function(e){return cliparts_list.sort(function(e,t){return(e[1].indexOf("clipart-num")>-1?1:0)-(t[1].indexOf("clipart-num")>-1?1:0)}),cliparts_list.forEach(function(t){e.cliparts_wrapper.insertAdjacentHTML("beforeend",'<div class="clipart" data-id="'+t[1]+'" data-nome="'+t[0]+'" role="button"><svg><title>'+t[0]+'</title><use xlink:href="#'+t[1]+'"></use></svg><div class="clipart-dida" title="'+t[0]+'">'+t[0]+"</div></div>")}),e}(RUOTA||{}))||{}))||{}))||{}))||{});
//# sourceMappingURL=la-ruota-dei-min.js.map