{"version":3,"sources":["la-ruota-dei.js","../node_modules/grabbable2/grabbable.js","../assets/cliparts_list.js","src/_print.js","src/_manage_settings.js","src/_form_settings.js","src/_cliparts.js","src/_cliparts_list_builder.js"],"names":["RUOTA","svg_wrapper","document","getElementById","storage_var","cliparts_wrapper","querySelector","cliparts_selected_wrapper","grabbableStyle","style","createElement","type","innerHTML","appendChild","customCallback","callCallback","elem","createEventObject","fireEvent","evt","createEvent","initEvent","dispatchEvent","dummy","bg","createDummy","position","width","height","overflow","className","addEventListener","e","dataTransfer","getData","preventDefault","stopPropagation","children","length","this","parentNode","insertBefore","display","x","updateDummy","el","left","offsetLeft","top","offsetTop","offsetWidth","offsetHeight","window","getComputedStyle","margin","marginTop","marginRight","marginBottom","marginLeft","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","initGrabbable","prevent","allowDrop","previousElementSibling","nextElementSibling","dragOn","setData","resetDrop","readyState","HTMLElement","prototype","grabbable","userCallback","indexOf","i","draggabled","draggable","DragEvent","cliparts_list","wheel","querySelectorAll","forEach","btn","update","store_settings","addClipsToDisk","print","settings","form","item","id","checked","value","cliparts","clipart_text","dataset","nome","push","localStorage","setItem","JSON","stringify","getItem","undefined","parse","form_el","add_selected_clipart","titolo1","titolo2","dim_titolo1","dim_titolo2","svg_titolo1","svg_titolo2","svg_finestra1","svg_deco","num_finestre","mostra_deco","Boolean","caratteri_titolo_outline","textContent","cssArray","cssText","join","toggleAttribute","clips_posizionabili_totali","cliparts_have_text","svg_retro","get_cliparts_num","set_clips_posizionabili_totali","classList","toggle","concat","remove","index","svg_center","getAttribute","split","textLength","insertAdjacentHTML","idx","text_element","bbox","getBBox","text_y","y","setAttribute","clipart_size","clipart_data","selected_last_child","closest","alert","sort","a","b"],"mappings":"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M,EAAGd,iBAAiB,OAAQ,SAASC,GACpCiC,EAAQjC,GACL9B,SAASe,kBACVM,EAAML,UAAU,SAAUc,GAE1BT,EAAMD,cAAc,IAAI2D,UAAUjD,EAAErB,KAAMqB,MAG7Ca,EAAGkC,YAAa,QAIc,IAAtB7E,SAAS6E,aAClB7E,SAAS6B,iBAAiB,WAAYkC,GACtC/D,SAAS6B,iBAAiB,OAAQwC,GAClCrE,SAAS6E,YAAa,IAhKxB,GCZD,IAAIG,cAAgB,CACnB,CACC,SACA,kBAED,CACC,UACA,mBAED,CACC,QACA,iBAED,CACC,QACA,iBAED,CACC,QACA,iBAED,CACC,SACA,kBAED,CACC,OACA,gBAED,CACC,UACA,mBAED,CACC,OACA,gBAED,CACC,OACA,gBAED,CACC,OACA,kBAED,CACC,MACA,kBAED,CACC,MACA,kBAED,CACC,MACA,kBAED,CACC,UACA,kBAED,CACC,SACA,kBAED,CACC,MACA,kBAED,CACC,QACA,kBAED,CACC,OACA,kBAED,CACC,OACA,kBAED,CACC,QACA,kBAED,CACC,SACA,kBAED,CACC,SACA,kBAED,CACC,UACA,kBAED,CACC,cACA,kBAED,CACC,WACA,kBAED,CACC,SACA,kBAED,CACC,cACA,kBAED,CACC,WACA,kBAED,CACC,aACA,kBAED,CACC,QACA,kBAED,CACC,aACA,sBAED,CACC,OACA,gBAED,CACC,QACA,iBAED,CACC,OACA,gBAED,CACC,SACA,mBC/IFlF,MAAS,SAAAmF,GA0BP,OAtBAjF,SAASkF,iBAAiB,cAAcC,QAAS,SAAAC,GAE/CA,EAAIvD,iBAAiB,QAAS,WAE5BoD,EAAMI,SACNJ,EAAMK,iBACNL,EAAMM,iBACNrC,OAAOsC,UACN,KAGLxF,SAASkF,iBAAiB,uBAAuBC,QAAS,SAAAC,GACxDA,EAAIvD,iBAAiB,QAAS,WAE5BoD,EAAMI,SACNJ,EAAMK,iBACNL,EAAMM,mBACL,KAKEN,EA1BA,ECATnF,MAAS,SAAAmF,GAGPA,EAAMK,eAAiB,WAErB,IAAIG,EAAW,CAEfC,KAAgB,IAEhB1F,SAASkF,iBAA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","sourcesContent":["//* eslint no-console: 0, no-unused-vars: 0, no-empty:  0 */\n/* exported RUOTA */\n\n/*!\n * La ruota dei...\n * Massimo Cassandro 2019\n *\n*/\n\n/*\n  @codekit-append quiet '../node_modules/grabbable2/grabbable.js'\n  @codekit-append '../assets/cliparts_list.js'\n  @codekit-append 'src/_cliparts_list_builder.js'\n  @codekit-append 'src/_cliparts.js'\n  @codekit-append 'src/_form_settings.js'\n  @codekit-append 'src/_manage_settings.js' //NB dopo _cliparts.js e _form_settings.js\n  @codekit-append 'src/_print.js'\n*/\n\nvar RUOTA = (() => {\n  \"use strict\";\n  var wheel = {\n    svg_wrapper: document.getElementById('svg-wrapper'),\n    storage_var: 'la_ruota_dei',\n    cliparts_wrapper: document.querySelector('main .cliparts-list'),\n    cliparts_selected_wrapper: document.querySelector('main .cliparts-selected-wrapper')\n  };\n\n  return wheel;\n})();\n","/* eslint no-console: 0, no-unused-vars: 0, no-empty:  0 */\n\n/*!\n * Grabbable 2 (grabbable with callback)\n * ----------------------------------------------------\n * forked from grabbable - Version: 1.0.4\n * Copyright 2016 Wolfgang Kurz\n * Released under the MIT license\n * https://github.com/WolfgangKurz/grabbable\n *\n * Massimo Cassandro (2018)\n * https://github.com/massimo-cassandro/grabbable2\n */\n\"use strict\";\n!function(){\n\tvar grabbableStyle = function(){\n\t\tvar style = document.createElement(\"style\");\n\t\tstyle.type = \"text/css\";\n\t\tstyle.innerHTML = \".grabbable > * { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; cursor: -webkit-grab; cursor: grab } \"\n\t\t\t+ \".grabbable > .grabbable-dummy {\"\n\t\t\t+ \" border: 1px solid #d4d4d4;\"\n\t\t\t+ \" background: repeating-linear-gradient( -45deg, #fff, #fff 4px, #d4d4d4 4px, #d4d4d4 5px );\"\n\t\t\t+ \"}\";\n\t\tdocument.querySelector(\"body\").appendChild(style);\n\t};\n\n\tvar customCallback = null;\n\n\tvar callCallback = function(elem){\n\t\tif(document.createEventObject) {\n\t\t\telem.fireEvent(\"ondragged\");\n\n\t\t} else {\n\t\t\tvar evt = document.createEvent(\"HTMLEvents\");\n\t\t\tevt.initEvent(\"dragged\", false, true);\n\t\t\telem.dispatchEvent(evt);\n\n      if( customCallback && typeof customCallback === 'function') {\n        customCallback();\n      }\n\t\t}\n\t};\n\n\tvar dummy = null, bg = null;\n\tvar createDummy = function(){\n\t\tbg = document.createElement(\"div\");\n\t\tbg.style.position = \"absolute\";\n\t\tbg.style.width = \"1px\";\n\t\tbg.style.height = \"1px\";\n\t\tbg.style.overflow = \"hidden\";\n\n\t\tdummy = document.createElement(\"div\");\n\t\tdummy.className = \"grabbable-dummy\";\n\t\tdummy.style.position = \"relative\";\n\t\tdummy.addEventListener(\"drop\", function(e){\n\t\t\tvar data = e.dataTransfer.getData(\"text\");\n\t\t\tif(data!==\"draggable\") return;\n\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\n\t\t\twhile(bg.children.length>0){\n\t\t\t\tvar elem = bg.children[0];\n\t\t\t\tthis.parentNode.insertBefore(elem, this);\n\t\t\t}\n\n\t\t\tdummy.style.display = \"none\";\n\t\t\tcallCallback(dummy.parentNode);\n\t\t});\n\n\t\tvar x = document.querySelector(\"body\");\n\t\tx.appendChild(dummy);\n\t\tx.appendChild(bg);\n\t};\n\tvar updateDummy = function(el){\n\n/**** fix */\n\t\tif(bg === null) {\n  \t\tgrabbableStyle();\n  \t\tcreateDummy();\n\t\t}\n/**** end fix */\n\n\t\tbg.style.left = el.offsetLeft+\"px\";\n\t\tbg.style.top = el.offsetTop+\"px\";\n\t\tdummy.style.width = el.offsetWidth+\"px\";\n\t\tdummy.style.height = el.offsetHeight+\"px\";\n\n\t\tvar style = window.getComputedStyle(el);\n\t\tdummy.style.display = style.display;\n\t\tdummy.style.margin = style.marginTop+\" \"+style.marginRight+\" \"+style.marginBottom+\" \"+style.marginLeft;\n\t\tdummy.style.padding = style.paddingTop+\" \"+style.paddingRight+\" \"+style.paddingBottom+\" \"+style.paddingLeft;\n\t};\n\tvar initGrabbable = function(){\n\t\tgrabbableStyle();\n\t\tcreateDummy();\n\t};\n\n\tvar prevent = function(e){\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t};\n\tvar allowDrop = function(e){\n\t\te.preventDefault();\n\n\t\te.stopPropagation();\n\n\t\tif(this.previousElementSibling!==dummy)\n\t\t\tthis.parentNode.insertBefore(dummy, this);\n\t\telse\n\t\t\tthis.parentNode.insertBefore(dummy, this.nextElementSibling);\n\t};\n\tvar dragOn = function(e){\n\t\te.dataTransfer.setData(\"text\", \"draggable\");\n\t};\n\tvar resetDrop = function(e){\n\t\tvar data = e.dataTransfer.getData(\"text\");\n\t\tif(data!==\"draggable\") return;\n\n\t\tprevent(e);\n\n\t\twhile(bg.children.length>0){\n\t\t\tvar elem = bg.children[0];\n\t\t\tdummy.parentNode.insertBefore(elem, dummy);\n\t\t}\n\t\tdummy.style.display = \"none\";\n\t\tcallCallback(dummy.parentNode);\n\t};\n\n\tif(document.readyState===\"complete\") {\n  \tinitGrabbable();\n\t} else {\n  \tdocument.addEventListener(\"DOMContentLoaded\", function(){ initGrabbable(); });\n  }\n\n\tHTMLElement.prototype.grabbable = function( userCallback ){\n\t\tif( (\" \"+this.className+\" \").indexOf(\" grabbable \")<0 )\n\t\t\tthis.className += \" grabbable\";\n\n\t\tif( userCallback && typeof userCallback === 'function' ) {\n  \t\tcustomCallback = userCallback;\n\t\t}\n\n\t\tfor(var i=0; i<this.children.length; i++){\n\t\t\tvar el = this.children[i];\n\t\t\tif(typeof el.draggabled===\"undefined\"){\n\t\t\t\tif(el===dummy) continue;\n\n\t\t\t\tel.draggable = true;\n\n\t\t\t\tel.addEventListener(\"dragstart\", dragOn);\n\t\t\t\tel.addEventListener(\"dragover\", allowDrop);\n\t\t\t\tel.addEventListener(\"drag\", function(){\n\t\t\t\t\tif(this.parentNode===bg) return;\n\t\t\t\t\tif(this===dummy) return;\n\t\t\t\t\tupdateDummy(this);\n\t\t\t\t\tthis.parentNode.insertBefore(dummy, this);\n\t\t\t\t\tbg.appendChild(this);\n\t\t\t\t});\n\t\t\t\tel.addEventListener(\"drop\", function(e){\n\t\t\t\t\tprevent(e);\n\t\t\t\t\tif(document.createEventObject) {\n  \t\t\t\t\tdummy.fireEvent(\"ondrop\", e);\n\t\t\t\t\t} else {\n  \t\t\t\t\tdummy.dispatchEvent(new DragEvent(e.type, e));\n  \t\t\t\t}\n\t\t\t\t});\n\t\t\t\tel.draggabled = true;\n\t\t\t}\n\t\t}\n\n\t\tif(typeof document.draggabled===\"undefined\"){\n\t\t\tdocument.addEventListener(\"dragover\", prevent);\n\t\t\tdocument.addEventListener(\"drop\", resetDrop);\n\t\t\tdocument.draggabled = true;\n\t\t}\n\t};\n}();\n","// lista id cliparts per demo\n// NB: questo file è generato dallo script gulpfile_cliparts.js, eventuali modifiche saranno sovrascritte\nvar cliparts_list = [\n [\n  \"albero\",\n  \"clipart-albero\"\n ],\n [\n  \"ciliege\",\n  \"clipart-ciliege\"\n ],\n [\n  \"cuore\",\n  \"clipart-cuore\"\n ],\n [\n  \"fiore\",\n  \"clipart-fiore\"\n ],\n [\n  \"fiori\",\n  \"clipart-fiori\"\n ],\n [\n  \"foglia\",\n  \"clipart-foglia\"\n ],\n [\n  \"luna\",\n  \"clipart-luna\"\n ],\n [\n  \"macchia\",\n  \"clipart-macchia\"\n ],\n [\n  \"mano\",\n  \"clipart-mano\"\n ],\n [\n  \"mela\",\n  \"clipart-mela\"\n ],\n [\n  \"zero\",\n  \"clipart-num-00\"\n ],\n [\n  \"uno\",\n  \"clipart-num-01\"\n ],\n [\n  \"due\",\n  \"clipart-num-02\"\n ],\n [\n  \"tre\",\n  \"clipart-num-03\"\n ],\n [\n  \"quattro\",\n  \"clipart-num-04\"\n ],\n [\n  \"cinque\",\n  \"clipart-num-05\"\n ],\n [\n  \"sei\",\n  \"clipart-num-06\"\n ],\n [\n  \"sette\",\n  \"clipart-num-07\"\n ],\n [\n  \"otto\",\n  \"clipart-num-08\"\n ],\n [\n  \"nove\",\n  \"clipart-num-09\"\n ],\n [\n  \"dieci\",\n  \"clipart-num-10\"\n ],\n [\n  \"undici\",\n  \"clipart-num-11\"\n ],\n [\n  \"dodici\",\n  \"clipart-num-12\"\n ],\n [\n  \"tredici\",\n  \"clipart-num-13\"\n ],\n [\n  \"quattordici\",\n  \"clipart-num-14\"\n ],\n [\n  \"quindici\",\n  \"clipart-num-15\"\n ],\n [\n  \"sedici\",\n  \"clipart-num-16\"\n ],\n [\n  \"diciassette\",\n  \"clipart-num-17\"\n ],\n [\n  \"diciotto\",\n  \"clipart-num-18\"\n ],\n [\n  \"diciannove\",\n  \"clipart-num-19\"\n ],\n [\n  \"venti\",\n  \"clipart-num-20\"\n ],\n [\n  \"palloncini\",\n  \"clipart-palloncini\"\n ],\n [\n  \"pera\",\n  \"clipart-pera\"\n ],\n [\n  \"pesce\",\n  \"clipart-pesce\"\n ],\n [\n  \"sole\",\n  \"clipart-sole\"\n ],\n [\n  \"stella\",\n  \"clipart-stella\"\n ]\n];","/* globals RUOTA:true */\n\nRUOTA = (wheel => {\n  \"use strict\";\n\n\n  document.querySelectorAll('.btn-print').forEach( btn => {\n\n    btn.addEventListener('click', function () {\n\n      wheel.update();\n      wheel.store_settings();\n      wheel.addClipsToDisk();\n      window.print();\n    }, false);\n  });\n\n  document.querySelectorAll('.btn-store_settings').forEach( btn => {\n    btn.addEventListener('click', function () {\n\n      wheel.update();\n      wheel.store_settings();\n      wheel.addClipsToDisk();\n    }, false);\n  });\n\n\n\n  return wheel;\n\n})(RUOTA || {});\n","/* globals RUOTA:true */\n\nRUOTA = (wheel => {\n  \"use strict\";\n\n  wheel.store_settings = function () {\n\n    let settings = {};\n\n    settings.form = {};\n\n    document.querySelectorAll('#settings input').forEach( item => {\n\n\n      if(item.type === 'radio' || item.type === 'checkbox') {\n        settings.form[item.id] = item.checked;\n      } else {\n        settings.form[item.id] = item.value;\n      }\n    });\n\n    settings.cliparts = [];\n\n    wheel.cliparts_selected_wrapper.querySelectorAll('.clipart-selected').forEach(item => {\n      let clipart_text = item.querySelector('.clipart-text input').value;\n      item.dataset.nome = clipart_text;\n      settings.cliparts.push(item.dataset);\n    });\n    localStorage.setItem(wheel.storage_var, JSON.stringify(settings));\n  };\n\n\n  // retrieve settings\n  let settings = localStorage.getItem(wheel.storage_var);\n\n  if(settings) {\n    settings = JSON.parse(settings);\n    if(settings.form !== undefined && settings.cliparts !== undefined) {\n      for(let i in settings.form) {\n\n        let form_el = document.getElementById(i);\n\n        if(form_el.type === 'radio' || form_el.type === 'checkbox') {\n          form_el.checked = settings.form[i];\n        } else {\n          form_el.value = settings.form[i];\n        }\n      }\n\n      settings.cliparts.forEach(item => {\n        wheel.add_selected_clipart(item);\n      });\n\n      wheel.addClipsToDisk();\n    }\n\n  }\n\n  return wheel;\n\n})(RUOTA || {});\n","/* globals RUOTA:true */\n\nRUOTA = (wheel => {\n  \"use strict\";\n\n  const titolo1   = document.getElementById('titolo1'),\n    titolo2       = document.getElementById('titolo2'),\n    dim_titolo1   = document.getElementById('dim_titolo1'),\n    dim_titolo2   = document.getElementById('dim_titolo2'),\n    svg_titolo1   = wheel.svg_wrapper.querySelector('#ruota_fronte .titolo1'),\n    svg_titolo2   = wheel.svg_wrapper.querySelector('#ruota_fronte .titolo2'),\n    svg_finestra1 = wheel.svg_wrapper.querySelector('#ruota_fronte .finestra1'),\n    svg_deco      = wheel.svg_wrapper.querySelector('#ruota_fronte .deco');\n\n  wheel.update = function () {\n\n    let num_finestre              = +document.querySelector('[name=\"finestre\"]:checked').value, // solo versione due dischi\n      mostra_deco                 = Boolean(+document.querySelector('[name=\"deco\"]:checked').value),\n      caratteri_titolo_outline    = Boolean(+document.querySelector('[name=\"caratteri_titolo\"]:checked').value);\n\n    svg_titolo1.textContent = titolo1.value;\n    svg_titolo2.textContent = titolo2.value;\n\n\n    let cssArray = [];\n    if(caratteri_titolo_outline) {\n      cssArray = ['fill: #fff', 'stroke:#000', 'stroke-width:1px'];\n    } else {\n      cssArray = ['fill: #000', 'stroke:none'];\n    }\n    svg_titolo1.style.cssText = cssArray.join(';') + '; font-size:' + dim_titolo1.value + 'px';\n    svg_titolo2.style.cssText = cssArray.join(';') + '; font-size:' + dim_titolo2.value + 'px';\n\n\n    //svg_titolo1.style.fontSize = dim_titolo1.value + 'px';\n    //svg_titolo2.style.fontSize = dim_titolo2.value + 'px';\n\n    svg_deco.toggleAttribute('hidden', mostra_deco);\n    svg_finestra1.toggleAttribute('hidden', num_finestre === 1);\n  };\n\n\n  document.querySelectorAll('#settings input').forEach( item => {\n    item.addEventListener('change', function () {\n      wheel.update();\n    });\n\n    if(item.type === 'text') {\n      item.addEventListener('keyup', function () {\n        wheel.update();\n      });\n    }\n\n    if(item.type === 'radio' || item.type === 'checkbox') {\n      item.addEventListener('click', function () {\n        wheel.update();\n      });\n    }\n\n  });\n\n/*\n  document.querySelector('.btn-update').addEventListener('click', function () {\n    wheel.update();\n  });\n*/\n\n  wheel.update();\n\n  return wheel;\n\n})(RUOTA || {});\n","/* globals RUOTA:true */\n\nRUOTA = (wheel => {\n  \"use strict\";\n\n  const svg_retro = wheel.svg_wrapper.querySelector('#ruota_retro');\n\n  // numero delle clips posizionabili nel disco\n  let clips_posizionabili_totali,\n  // viene mostrato il nome della clip?\n  cliparts_have_text,\n\n  // restituisce il numero delle clipart aggiunte\n  get_cliparts_num = function () {\n    return wheel.cliparts_selected_wrapper.querySelectorAll('.clipart-selected').length;\n  },\n\n  // determina il numero delle clips posizionabili nel disco\n  set_clips_posizionabili_totali = function () {\n    clips_posizionabili_totali = +document.querySelector('[name=\"finestre\"]:checked').value === 1? 12 : 6;\n    cliparts_have_text = clips_posizionabili_totali === 6;\n\n    // aggiunge una classe a `wheel.cliparts_selected_wrapper` per mostrare o meno il campo testo\n    wheel.cliparts_selected_wrapper.classList.toggle('clipart-text', !cliparts_have_text);\n\n    if(get_cliparts_num() > clips_posizionabili_totali) {\n      wheel.cliparts_selected_wrapper\n        .querySelectorAll(`.clipart-selected:nth-child(n+${clips_posizionabili_totali + 1}`)\n        .forEach(item => {\n          item.remove();\n        });\n    }\n\n  };\n\n  // listener radio scelta numero finestre\n  document.querySelectorAll('[name=\"finestre\"]').forEach(el => {\n    el.addEventListener('click', () => {\n      set_clips_posizionabili_totali();\n    });\n  });\n\n  // aggiunge le clipart al disco\n  wheel.addClipsToDisk = function () {\n\n    set_clips_posizionabili_totali();\n\n    svg_retro.querySelectorAll('.clipart').forEach(item => {\n      item.remove();\n    });\n\n    wheel.cliparts_selected_wrapper.querySelectorAll(`.clipart-selected`).forEach((item, index) => {\n\n      let clipart_text = item.querySelector('.clipart-text input').value;\n\n      const clipart_size = 50,\n        clipart_y = 30,\n        radius_step = 30,\n        retro_svg_vbox_width = svg_retro.getAttribute('viewBox').split(' ')[2],\n        svg_center = retro_svg_vbox_width/2;\n\n      if(cliparts_have_text) {\n\n        let text_x = 28,\n        textLength = svg_center - text_x - 52;\n\n        svg_retro.insertAdjacentHTML('beforeend',\n          `<g class=\"clipart clipart-text clipart-text-${item.dataset.idx}\">\n            <text\n              text-anchor=\"start\"\n              transform=\"rotate(90)\"\n              style=\"/* visibility:hidden */\"\n            >\n              ${clipart_text}\n            </text>\n          </g>`\n        );\n\n        // calcolo bbox\n        // restituisce un oggetto con width, height, x, y\n        let text_element = svg_retro.querySelector(`.clipart-text-${item.dataset.idx} text`),\n        bbox = text_element.getBBox(),\n\n        text_y= -svg_center + (bbox.y + bbox.height) - 5;\n\n        text_element.setAttribute('y', text_y);\n        text_element.setAttribute('x', text_x);\n\n        if(bbox.width > textLength) {\n          text_element.setAttribute('textLength', textLength);\n          text_element.setAttribute('lengthAdjust', 'spacingAndGlyphs');\n        }\n\n        svg_retro.querySelector(`.clipart-text-${item.dataset.idx}`)\n          .setAttribute('transform', `rotate(${radius_step * index} ${svg_center} ${svg_center})`);\n\n\n        svg_retro.insertAdjacentHTML('beforeend',\n          `<use class=\"clipart clipart-${item.dataset.idx}\"\n            width=\"${clipart_size}\" height=\"${clipart_size}\"\n            y=\"${clipart_y}\" x=\"${svg_center - (clipart_size / 2)}\"\n            transform=\"rotate(${radius_step * (index + 6)} ${svg_center} ${svg_center})\"\n            xlink:href=\"#${item.dataset.id}\">\n          </use>`\n        );\n\n      } else {\n        svg_retro.insertAdjacentHTML('beforeend',\n          `<use class=\"clipart clipart-${item.dataset.idx}\"\n            width=\"${clipart_size}\" height=\"${clipart_size}\"\n            y=\"${clipart_y}\" x=\"${svg_center - (clipart_size / 2)}\"\n            transform=\"rotate(${radius_step * index} ${svg_center} ${svg_center})\"\n            xlink:href=\"#${item.dataset.id}\">\n          </use>`\n        );\n      }\n    });\n\n  }; // end wheel.addClipsToDisk\n\n  // funzione per l'aggiunta delle cliparts\n  wheel.add_selected_clipart = function (clipart_data) {\n\n    // INDICE clipart\n    let idx = wheel.cliparts_selected_wrapper.querySelectorAll('.clipart-selected').length;\n\n    wheel.cliparts_selected_wrapper.insertAdjacentHTML('beforeend',\n      `<div class=\"clipart-selected\" title=\"Trascina per cambiare la posizione\">\n          <div>\n            <div class=\"clipart_btns\">\n              <div class=\"drag-btn\" role=\"button\"><span>Trascina</span></div>\n              <div class=\"close-btn\" title=\"Elimina\" role=\"button\"><span>Elimina</span></div>\n            </div>\n            <svg preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 100 100\">\n              <use xlink:href=\"#${clipart_data.id}\"></use>\n            </svg>\n            <div class=\"clipart-text mt-2\">\n              <label for=\"clipart-label-${idx}\" class=\"sr-only\">Nome</label>\n              <input class=\"form-control\" id=\"clipart-label-${idx}\" value=\"${clipart_data.nome}\" type=\"text\">\n            </div>\n          </div>\n      </div>`\n    );\n\n    let selected_last_child = wheel.cliparts_selected_wrapper\n      .querySelector('.clipart-selected:last-child');\n\n    for(let i in clipart_data) {\n      selected_last_child.dataset[i] = clipart_data[i];\n    }\n    selected_last_child.dataset.idx = idx;\n\n    wheel.cliparts_selected_wrapper.grabbable(/* function () {\n      wheel.addClipsToDisk();\n    } */);\n\n    //wheel.addClipsToDisk();\n\n    let close_btn = selected_last_child.querySelector('.close-btn');\n\n    close_btn.addEventListener('click', function () {\n      this.closest('.clipart-selected').remove();\n      //wheel.addClipsToDisk();\n    });\n  }; // end wheel.add_selected_clipart\n\n  // listener clic sulle clipart presenti nella lista\n  wheel.cliparts_wrapper.querySelectorAll('.clipart').forEach(item => {\n\n    item.addEventListener('click', () => {\n\n      if (get_cliparts_num() < clips_posizionabili_totali ) {\n        wheel.add_selected_clipart(item.dataset);\n\n      } else {\n        alert('Hai raggiunto il numero massimo di immagini!');\n      }\n    });\n\n  });\n\n  document.querySelector('.btn-reset-clips').addEventListener('click', function () {\n    svg_retro.querySelectorAll('.clipart').forEach(item => {\n      item.remove();\n    });\n    wheel.cliparts_selected_wrapper.innerHTML = '';\n  }, false);\n\n  return wheel;\n\n})(RUOTA || {});\n","/* globals RUOTA:true */\n\nRUOTA = (wheel => {\n  \"use strict\";\n\n  /*\n    var cliparts_list = [\n      [\n        \"albero\",\n        \"clipart-albero\"\n      ],\n      [\n        \"zero\",\n        \"clipart-num-00\"\n      ],\n\n      [...]\n    ]\n  */\n\n  // ordinamento in modo che i numeri siano in fondo\n  // cliparts_list è generato dallo script gulp che crea le icone svg\n\n  cliparts_list.sort((a, b) => {\n    const num_prefix = 'clipart-num';\n\n    let a_isNum = a[1].indexOf(num_prefix) > -1 ? 1 : 0,\n      b_isNum = b[1].indexOf(num_prefix) > -1 ? 1 : 0;\n\n    return a_isNum - b_isNum;\n  });\n\n  cliparts_list.forEach(function (item) {\n    wheel.cliparts_wrapper.insertAdjacentHTML('beforeend',\n      '<div class=\"clipart\" data-id=\"' + item[1] + '\" data-nome=\"' + item[0] + '\" role=\"button\">' +\n        '<svg>' +\n          '<title>' + item[0] + '</title>' +\n          '<use xlink:href=\"#' + item[1] + '\"></use>'+\n        '</svg>'+\n        '<div class=\"clipart-dida\" title=\"' + item[0] + '\">' + item[0] + '</div>'+\n      '</div>'\n    );\n  });\n\n  return wheel;\n\n})(RUOTA || {});\n"]}